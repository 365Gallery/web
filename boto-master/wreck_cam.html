<!DOCTYPE html>
<html lang="zxx">
<head>
	<title>365 Gallery</title>
	<meta charset="UTF-8">
	<meta name="description" content="Boto Photo Studio HTML Template">
	<meta name="keywords" content="photo, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Stylesheets -->
	<link rel="stylesheet" href="css/bootstrap.min.css"/>
	<link rel="stylesheet" href="css/font-awesome.min.css"/>
	<link rel="stylesheet" href="css/slicknav.min.css"/>

	<!-- Main Stylesheets -->
	<link rel="stylesheet" href="css/style.css"/>


	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

</head>
<body>
	<!-- Page Preloder -->
	<div id="preloder">
		<div class="loader"></div>
	</div>

	<!-- Header Section -->
	<header class="header">
		<div class="container-fluid">
			<div class="row">
				<div class="col-sm-4 col-md-3 order-2 order-sm-1">
				</div>
				<div class="col-sm-4 col-md-6 order-1  order-md-2 text-center">
					<a href="./index.html" class="site-logo">
						<img src="img/logo.png" alt="">
					</a>
				</div>
				<div class="col-sm-4 col-md-3 order-3 order-sm-3">
				</div>
			</div>
			<nav class="main__menu">
				<ul class="nav__menu">
					<li><a href="./index.html">Home</a></li>
					<li><a href="./scream_pic.html" class="menu--active">Exhibition</a>
					<ul class="sub__menu">
							<li><a href="./scream_pic.html">Scream</a></li>
							<li><a href="./la_muse_pic.html">La Muse</a></li>
							<li><a href="./rain_princess_pic.html">Rain Princess</a></li>
							<li><a href="./udnie_pic.html">Udnie</a></li>
							<li><a href="./wave_pic.html">Wave</a></li>
							<li><a href="./wreck_pic.html">Shipwreck</a></li>
						</ul></li>
					<li><a href="./mygallery.html">My Gallery</a></li>
					<li><a href="./login.html">Log in</a></li>
				</ul>
			</nav>
		</div>
	</header>
	<!-- Header Section end -->

	<!-- About Page -->
	<section class="about__page">
		<div class="move-btn-pic">
			<button onClick="location.href='wreck_pic.html'">이미지 전환</button>
		</div>
		<div class="cam-box">
			<div id="mycam" class="input-cam" autoplay>
			</div>
			<div class = "output-cam">
				<img src="http://34.64.208.178:8000/media/output.jpeg" name="camReload" alt=""/>
			</div>
		</div>
		<div class="cam-description">
			<div class="row">
				<div class="about__text">
						<h3 class="about__title">
							<br><br>Joseph Mallord William Turner</h3>
						<div class="about__meta">
							<img src="img/exhibition/wreck.jpg" alt="">
							<div class="about__meta__info">
								<h5>The Shipwreck of the Minotaur</h5>
								<p>Joseph Mallord William Turner | 1805 | 171 x 240 cm | Oil on canvas</p>
							</div>
						</div>
						<p>조지프 말로드 윌리엄 터너(Joseph Mallord William Turner 1775년 4월 23일 ~ 1851년 12월 19일)는 영국의 화가이다. 런던에서 이발사의 아들로 태어났다. 일찍부터 회화에 손을 대어 왕립 미술원에서 그림 수업을 한 뒤, 잠깐 사이에 준회원에서 27세 되던 1802년에 정회원으로 올라갔다. 여러 곳의 풍습과 풍경을 주로 그렸으며, 특히 빛의 묘사에서 획기적인 표현을 남긴 화가이다.</p>
						<p>작품에는 《차일드 해럴드의 순례》(1832), 《전함 테메레이르호(號)》(1839), 《안개 속의 해돋이》, 《비·증기·속력》, 《황금가지》 등이 있는데, 원숙한 빛의 표현이 아름답다. 이상하게도 제자나 후계자가 없는 화가로서 고독한 성격이었으며, 본가 외에 체르시에 은거하면서 이름을 바꾸어 생활을 했기 때문에 아는 사람도 없이 그 곳에서 숨을 거두었다.</p>
				</div>
			</div>
		</div>
	</section>
	<!-- About Page end -->


	<!-- Search Begin -->
	<div class="search-model">
		<div class="h-100 d-flex align-items-center justify-content-center">
			<div class="search-close-switch">+</div>
			<form class="search-model-form">
				<input type="text" id="search-input" placeholder="Search here.....">
			</form>
		</div>
	</div>
	<!-- Search End -->

	<!--====== Javascripts & Jquery ======-->
	<script src="js/vendor/jquery-3.2.1.min.js"></script>
	<script src="js/jquery.slicknav.min.js"></script>
	<script src="js/slick.min.js"></script>
	<script src="js/main.js"></script>
	<script src="js/webcam.js"></script>

	<!-- Script: Cam reload -->
	<script>
		setInterval(function(){
	    	timeTmp = new Date().getTime();
	    	timeTmp = "?"+ timeTmp;

	    	var target='camReload';
	    	newImage = document.images[target].src;

	    	idx = newImage.indexOf("?", 0);

	    	if(idx > 0){
	    		newImage = newImage.substr(0, idx);
	    	}
	    	document.images[target].src = newImage+timeTmp;
		}, 150);
	</script>

	<!-- Script: Cam functions -->
	<script>
		function dataURItoBlob(dataURI) {
		    // convert base64/URLEncoded data component to raw binary data held in a string
		    var byteString;
		    if (dataURI.split(',')[0].indexOf('base64') >= 0)
		        byteString = atob(dataURI.split(',')[1]);
		    else
		        byteString = unescape(dataURI.split(',')[1]);

		    // separate out the mime component
		    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];

		    // write the bytes of the string to a typed array
		    var ia = new Uint8Array(byteString.length);
		    for (var i = 0; i < byteString.length; i++) {
		        ia[i] = byteString.charCodeAt(i);
		    }

		    return new Blob([ia], {type:mimeString});
		}

		function uploadSnap(img_src){
			imageBlob = dataURItoBlob(img_src);
			var data = new FormData();
			data.append('file', imageBlob, "webcam.jpeg");

			$.ajax({
		        type: "POST",
		        enctype: 'multipart/form-data',
		        url: "http://34.64.208.178:8000/api/v1/images/?model=wreck.ckpt",
		        data: data,
		        processData: false,
		        contentType: false,
		        cache: false,
		        timeout: 600000,
		    });
		}

		function take_snapshot() {
			Webcam.snap(function(data_uri) {
				uploadSnap(data_uri);
			});
		}

		function ShowCam(){
			Webcam.set({
			width: 500,
			height: 400,
			image_format: 'jpeg',
			jpeg_quality: 30
			});
			Webcam.attach('#mycam');
		}

		window.onload = ShowCam;

		setInterval(function(){
	    	if (Webcam.loaded) {
	    		take_snapshot();
	    	}
		}, 300);
	</script>
	</body>
</html>