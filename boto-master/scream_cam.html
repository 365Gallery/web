<!DOCTYPE html>
<html lang="zxx">
<head>
	<title>365 Gallery</title>
	<meta charset="UTF-8">
	<meta name="description" content="Boto Photo Studio HTML Template">
	<meta name="keywords" content="photo, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Stylesheets -->
	<link rel="stylesheet" href="css/bootstrap.min.css"/>
	<link rel="stylesheet" href="css/font-awesome.min.css"/>
	<link rel="stylesheet" href="css/slicknav.min.css"/>

	<!-- Main Stylesheets -->
	<link rel="stylesheet" href="css/style.css"/>


	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->

</head>
<body>
	<!-- Page Preloder -->
	<div id="preloder">
		<div class="loader"></div>
	</div>

	<!-- Header Section -->
	<header class="header">
		<div class="container-fluid">
			<div class="row">
				<div class="col-sm-4 col-md-3 order-2 order-sm-1">
				</div>
				<div class="col-sm-4 col-md-6 order-1  order-md-2 text-center">
					<a href="./index.html" class="site-logo">
						<img src="img/logo.png" alt="">
					</a>
				</div>
				<div class="col-sm-4 col-md-3 order-3 order-sm-3">
				</div>
			</div>
			<nav class="main__menu">
				<ul class="nav__menu">
					<li><a href="./index.html">Home</a></li>
					<li><a href="./scream_pic.html" class="menu--active">Exhibition</a>
					<ul class="sub__menu">
							<li><a href="./scream_pic.html">Scream</a></li>
							<li><a href="./la_muse_pic.html">La Muse</a></li>
							<li><a href="./rain_princess_pic.html">Rain Princess</a></li>
							<li><a href="./udnie_pic.html">Udnie</a></li>
							<li><a href="./wave_pic.html">Wave</a></li>
							<li><a href="./wreck_pic.html">Shipwreck</a></li>
						</ul></li>
					<li><a href="./mygallery.html">My Gallery</a></li>
					<li><a href="./login.html">Log in</a></li>
				</ul>
			</nav>
		</div>
	</header>
	<!-- Header Section end -->

	<!-- About Page -->
	<section class="about__page">
		<div class="move-btn-pic">
			<button onClick="location.href='scream_pic.html'">이미지 전환</button>
		</div>
		<div class="cam-box">
			<div id="mycam" class="input-cam" autoplay>
			</div>
			<div class = "output-cam">
				<img src="http://34.64.170.176:8000/media/output.jpeg" name="camReload" alt=""/>
			</div>
		</div>
		<div class="cam-description">
			<div class="row">
				<div class="about__text">
						<h3 class="about__title">
							<br><br>Edvard Munch</h3>
						<div class="about__meta">
							<img src="img/exhibition/The_Scream.jpg" alt="">
							<div class="about__meta__info">
								<h5>The Scream</h5>
								<p>Edvard Munch | 1983 | 73.5 x 91 cm, 28.9 x 36 in | Oil, tempera, pastel and crayon on cardboard</p>
							</div>
						</div>
						<p>《절규》(The Scream of Nature; 1893-1910년)는 노르웨이의 예술가 에드바르 뭉크의 연작 중 하나인 표현주의 그림으로, 핏빛의 하늘을 배경으로 괴로워하는 인물을 묘사하였다. 배경의 풍경은 노르웨이 오슬로(당시 크리스티아니아)의 이케베르크 언덕에서 보이는 오슬로피오르이다.</p>
						<p>"친구 둘과 함께 길을 걸어 가고 있었다. 해질녘이었고 나는 약간의 우울함을 느꼈다. 그때 갑자기 하늘이 핏빛으로 물들기 시작했다. 그자리에 멈춰선 나는 죽을 것만같은 피로감으로 난간에 기댔다. 그리고 핏빛하늘에 걸친 불타는 듯한 구름과 암청색 도시가 있었다. 그때 자연을 관통하는 그치지 않는 커다란 비명 소리를 들었다."
						뭉크가 1892년 1월에 남긴 글은 매우 유명하다.</p>
				</div>
			</div>
		</div>
	</section>
	<!-- About Page end -->


	<!-- Search Begin -->
	<div class="search-model">
		<div class="h-100 d-flex align-items-center justify-content-center">
			<div class="search-close-switch">+</div>
			<form class="search-model-form">
				<input type="text" id="search-input" placeholder="Search here.....">
			</form>
		</div>
	</div>
	<!-- Search End -->

	<!--====== Javascripts & Jquery ======-->
	<script src="js/vendor/jquery-3.2.1.min.js"></script>
	<script src="js/jquery.slicknav.min.js"></script>
	<script src="js/slick.min.js"></script>
	<script src="js/main.js"></script>
	<script src="js/webcam.js"></script>

	<!-- Script: Cam reload -->
	<script>
		setInterval(function(){
	    	timeTmp = new Date().getTime();
	    	timeTmp = "?"+ timeTmp;

	    	var target='camReload';
	    	newImage = document.images[target].src;

	    	idx = newImage.indexOf("?", 0);

	    	if(idx > 0){
	    		newImage = newImage.substr(0, idx);
	    	}
	    	document.images[target].src = newImage+timeTmp;
		}, 150);
	</script>

	<!-- Script: Cam functions -->
	<script>
		function dataURItoBlob(dataURI) {
		    // convert base64/URLEncoded data component to raw binary data held in a string
		    var byteString;
		    if (dataURI.split(',')[0].indexOf('base64') >= 0)
		        byteString = atob(dataURI.split(',')[1]);
		    else
		        byteString = unescape(dataURI.split(',')[1]);

		    // separate out the mime component
		    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];

		    // write the bytes of the string to a typed array
		    var ia = new Uint8Array(byteString.length);
		    for (var i = 0; i < byteString.length; i++) {
		        ia[i] = byteString.charCodeAt(i);
		    }

		    return new Blob([ia], {type:mimeString});
		}

		function uploadSnap(img_src){
			imageBlob = dataURItoBlob(img_src);
			var data = new FormData();
			data.append('file', imageBlob, "webcam.jpeg");

			$.ajax({
		        type: "POST",
		        enctype: 'multipart/form-data',
		        url: "http://34.64.170.176:8000/api/v1/images/?model=scream.ckpt",
		        data: data,
		        processData: false,
		        contentType: false,
		        cache: false,
		        timeout: 600000,
		    });
		}

		function take_snapshot() {
			Webcam.snap(function(data_uri) {
				uploadSnap(data_uri);
			});
		}

		function ShowCam(){
			Webcam.set({
			width: 500,
			height: 400,
			image_format: 'jpeg',
			jpeg_quality: 30
			});
			Webcam.attach('#mycam');
		}

		window.onload = ShowCam;

		setInterval(function(){
	    	if (Webcam.loaded) {
	    		take_snapshot();
	    	}
		}, 300);
	</script>
	</body>
</html>